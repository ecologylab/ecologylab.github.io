<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Strict//EN">
<html xmlns="http://www.w3.org/1999/xhtml"><head>


<title>data definition [meta-metadata]</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link href="../../../code/styles/ecologylab/guide.css" rel="stylesheet">
<link rel="icon" href="../../../images/ecologylab-16.png" type="image/png">
<link rel="shortcut icon" href="../../../images/ecologylab-16.ico" type="image/ico">
<link rel="icon" href="../../../images/ecologylab-16.png" type="image/png">

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-20550827-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>

<body >

<div class="rootcontainer">

<div class="header">
<div class="title4">s.im.pl meta-metadata:<br/></div>
<div class="title4a">tutorial [data definition]</div>
</div>

<div class="tall_nav">

<div class="block">
 	<a class="navselected_bold_red" href="../index.html">s.im.pl</a>
	<a class="subnavlink" href="../serialization/index.html">serialization</a>
	<a class="subnavlink" href="../oodss/index.html">oodss</a>
	<a class="subnavlink" href="index.html">meta-metadata</a>
</div>
		
<div class="block">
  <a class="navselected_bold" href="index.html">meta-metadata</a>
  <a class="navlink" href="prereqs.html">prereqs</a>
  <a class="navlink" href="generalPrincipals.html">principles</a>
  <a class="navlink" href="environmentSetup.html">development<br/>environment</a>
  <a class="navlink" href="ice.html">in-context expander</a>
</div>
		
<div class="block">
  <a class="navselected_bold" href="libtutorials.html">tutorials</a>
  <a class="navselected" href="dataDefinition.html">- data definition</a>
  <a class="subnavlink2" href="informationExtraction.html">- information<br/>extraction</a>
  <a class="subnavlink2" href="semanticAction.html">- semantic&nbsp;actions</a>
  <a class="subnavlink2" href="advancedTopics.html">- advanced&nbsp;topics</a>
</div>

<div class="block">
  <a class="navlink" target="_blank" href="http://spreadsheets.google.com/pub?key=0AqoHBMh8I98IdFNtM0ZkT240VzJTXy1UcjNDcU9WdWc&hl=en&single=true&gid=3&output=html">reference</a>
  <a class="navlink"  target="_blank" href="http://ecologylab.net/javadocs/ecologylabSemantics/">API</a>
  <a class="navlink"  href="../repository.html">repository</a>
  <a class="navlink" href="../community.html">community</a>
  <a class="navlink"  href="../practices.html">programming practices</a>
</div>
	
<div class="block_ecologylab">
  <a class="top_navlink" href="../../../index.html">interface ecology lab</a>
  <a class="navlink" href="../../../research/index.html">research</a>
</div>

</div>


<div class="content">
<h5>For the tutorials we will create a  <span class="mmd">meta_metadata</span> object for the site <a href="http://www.urbanspoon.com">UrbanSpoon.</a></h5>
<br/>
There are many different types of information pages on UrbanSpoon.  When writing <i>meta-metadata</i> for a site
it's best practice to start with the lowest level of information page and then work up.
For that reason this object will be specifically for a UrbanSpoon <a href="http://www.urbanspoon.com/r/114/875031/restaurant/College-Station/Christophers-World-Grill-Bryan">restaurant information page</a>.
<br/> <br/>

The first step is to create a new XML file for your meta-metadata definitions and place it in the <span class="mmd" style="color:black;">mmdrepository/repositorySources</span> package in the MetaMetadataRepository project. Alternatively,
you can add your definitions to an existing file in that folder if one already exists for your information source. You will need to define a <span class="mmd">meta_metadata_repository</span> tag as the root element of the new XML file.
<br/><br/>

<b>NOTE: </b>You may need to delete <span class="mmd" style="color:black;">mmdrepository/powerUser/urbanSpoon.xml</span>
and <span class="mmd" style="color:black;">mmdrepository/repositorySources/restaurant.xml</span> to prevent some conflicts.
After getting through the tutorials, you can use SVN to revert local changes to get them back.
<br/><br/>

The tag must have the following attributes:
<ul>
    <li><span class="mmdAtt">name</span> -The name of the repository.</li>
    <li><span class="mmdAtt">package</span> - The default package to place classes generated by the MetadataCompiler using this meta-metadata.</li>
</ul>

<div class="mmdBlock">
&#60;meta_metadata_repository <span class="mmdAtt">name</span><span class="mmdVal">="urban_spoon"</span> <span class="mmdAtt">package</span><span class="mmdVal">="ecologylab.semantics.generated.library.tutorial.urbanspoon"</span> >
<br/><br/>
&#60;/meta_metadata_repository>
</div>

Next, you will need to create a <span class="mmd">meta_metadata</span> object. All other tags for this object will be nested inside this.
The tag must have the following attributes:
<ul>
    <li><span class="mmdAtt">name</span> - A unique name for the object.</li>
    <li><span class="mmdAtt">parser</span> - The type of data parser to be used, either <span class="mmdVal">"direct"</span> or <span class="mmdVal">"xpath"</span>. 
		Use <span class="mmdVal">"direct"</span> for sources represented by XML that can map directly to metadata, and <span class="mmdVal">"xpath"</span> for HTML documents that need xpath expressions
		for extraction of metadata.</li>
</ul>
Besides these three required attributes, the two following attributes will also be used:
<ul>
    <li><span class="mmdAtt">extends</span> - A <span class="mmd">meta_metadata</span> object which this one will extend, thus inheriting all of its fields and also allowing for more to be added.</li>
    <li><span class="mmdAtt">comment</span> - A helpful comment to increase readability.</li>
</ul>
So the meta_metadata tag for this object looks like this (where <span class="mmd">compound_document</span> is a built-in type):
<div class="mmdBlock">
&#60;meta_metadata <span class="mmdAtt">name<span class="mmdVal">="restaurant" <span class="mmdAtt">extends<span class="mmdVal">="compound_document" <span class="mmdAtt">comment<span class="mmdVal">="The restaurant class"<span class="mmd"> >
<br/><br/>
&#60;/meta_metadata>
</div>
<ul>
    <li><span class="mmdAtt">name<span class="mmdVal">="restaurant"</span></span> - A unique (within the <span class="mmd">meta_metadata_repository</span>) and informative name.</li>
    <li><span class="mmdAtt">extends<span class="mmdVal">="compound_document"</span></span> - This extends the built-in compound_document <span class="mmd">meta_metadata</span> type (which has the most basic fields such as title, description, etc.) to inherit its fields since this object will have some overlap.</li>
</ul>

Here we are defining a generic <span class="mmd">meta_metadata</span> type for all kinds of restaurants, while
urbanspoon.com is one of many <i>information sources</i> that provide data of this type.
<br/>
<br/>
Because this is the generic restaurant class the <span class="mmdAtt">parser</span> attribute is excluded -- different
sources may use different extraction methods.
It will be added later when we create a <span class="mmd">meta_metadata</span> object specific to UrbanSpoon.

<div class="bluebar">
</div>

Now that the object is defined, we will create some information fields. These fields will be things like the name of the restaurant,
its user rating, an image of the restaurant, etc. Fields are defined using one of three tags: 
<ul>
	<li><span class="mmd">scalar</span> for scalar fields, such as strings, integers, or URLs</li>
	<li><span class="mmd">composite</span> for fields that contain an object with multiple fields</li>
	<li><span class="mmd">collection</span> for fields containing multiple <span class="mmd">meta_metadata</span> objects</li>
</ul> 

<br/><br/>
The attributes needed for each field type are described below:

<br/><br/>
for <span class="mmd">scalar</span>:
<ul>
    <li><span class="mmdAtt">name</span> - A unique (within the object) name for the field.</li>
    <li><span class="mmdAtt">scalar_type</span> - The type of the data, either <span class="mmdVal">String</span>, <span class="mmdVal">ParsedURL</span> or <span class="mmdVal">Int</span>. </li>
    <li><span class="mmdAtt">xpath</span> - An XPath expression to the desired information.</li> 
    <li><span class="mmdAtt">comment</span> - A helpful comment.</li> 
</ul>

<br/><br/>
for <span class="mmd">composite</span>:
<ul>
    <li><span class="mmdAtt">name</span> - A unique (within the object) name for the field.</li>
    <li><span class="mmdAtt">type</span> - The type of the data object. </li>
    <li><span class="mmdAtt">xpath</span> - An XPath expression to the desired information.</li> 
    <li><span class="mmdAtt">comment</span> - A helpful comment.</li> 
</ul>

<br/><br/>
for <span class="mmd">collection</span>:
<ul>
    <li><span class="mmdAtt">name</span> - A unique (within the object) name for the field.</li>
    <li><span class="mmdAtt">child_type</span> - The type of data contained within the collection</li>
	<li><span class="mmdAtt">xpath</span> - An XPath expression to the desired information.</li> 
    <li><span class="mmdAtt">comment</span> - A helpful comment.</li> 
</ul>

<br/><br/>
To decide which information fields we want to gather let's take a look at the restaurant page and see what is available and what we think could be useful.
(As a rule it is always better to get the information even if you are not sure if it will be needed.)
<br/><br/>
<a href="http://www.urbanspoon.com/r/114/875031/restaurant/College-Station/Christophers-World-Grill-Bryan">
<img src="images/christophers.png"  alt="restaurant" align="middle" width="80%" />
</a>
<br/><br/>
I have boxed in blue the information which I think would be good to have:
<ul>
    <li>Restaurant name</li>
    <li>Phone number</li>
    <li>Website</li> 
    <li>A picture of the restaurant</li>
    <li>Rating</li>
    <li>Price of an average entree</li>
    <li>List of food genres</li>
    <li>A map showing the restaurant's location</li>
</ul>


The complete <span class="mmd">meta_metadata</span> object will be: 
<div class="mmdBlock">
	
	
&#60;meta_metadata_repository <span class="mmdAtt">name</span><span class="mmdVal">="urban_spoon"</span> <span class="mmdAtt">package</span><span class="mmdVal">="ecologylab.semantics.generated.library.tutorial.urbanspoon"</span> >
<br/>
<br/>
<span class="mmdVal">
<span class="mmd">&#60;meta_metadata</span> <span class="mmdAtt">name</span>="restaurant" <span class="mmdAtt">extends</span>="compound_document" <span class="mmdAtt">comment</span>="The restaurant class"<span class="mmd"> > </span><br/>
<div class="mmdfields"><br/>
<span class="mmd">&#60;scalar</span> <span class="mmdAtt">name</span>="phone" <span class="mmdAtt">scalar_type</span>="String" <span class="mmdAtt">comment</span>="Phone number of the restaurant" <span class="mmd"> /> </span><br/><br/>
<span class="mmd">&#60;scalar</span> <span class="mmdAtt">name</span>="pic" <span class="mmdAtt">scalar_type</span>="ParsedURL" <span class="mmdAtt">hide</span>="true" <span class="mmdAtt">comment</span>="A picture from the restaurant" <span class="mmd"> /> </span><br/><br/>
<span class="mmd">&#60;scalar</span> <span class="mmdAtt">name</span>="link" <span class="mmdAtt">scalar_type</span>="ParsedURL" <span class="mmdAtt">comment</span>="Link to the restaurant's website" <span class="mmd"> /> </span><br/><br/>
<span class="mmd">&#60;scalar</span> <span class="mmdAtt">name</span>="rating" <span class="mmdAtt">scalar_type</span>="String" <span class="mmdAtt">comment</span>="Rating of the restaurant" <span class="mmd"> /> </span><br/><br/>
<span class="mmd">&#60;scalar</span> <span class="mmdAtt">name</span>="price_range" <span class="mmdAtt">scalar_type</span>="String" <span class="mmdAtt">comment</span>="Price range of the restaurant" <span class="mmd"> /> </span><br/><br/>
<span class="mmd">&#60;scalar</span> <span class="mmdAtt">name</span>="map" <span class="mmdAtt">scalar_type</span>="ParsedURL"  <span class="mmdAtt">hide</span>="true" <span class="mmdAtt">comment</span>="Map image of the restaurant's location or link to a directions page" <span class="mmd"> /> </span><br/><br/>
<span class="mmd">&#60;collection</span> <span class="mmdAtt">name</span>="genres" <span class="mmdAtt">child_type</span>="document" <span class="mmdAtt">generate_class</span>="false" <span class="mmdAtt">comment</span>="The genres of food offered" <span class="mmd"> /> </span><br/><br/>
</div>
<span class="mmd">&#60;/meta_metadata> </span><br/>
</span>
<br />
&#60;/meta_metadata_repository>
</div>
Some key things to observe from this class:
<ul>
	<li>The <span class="mmd">meta_metadata</span> element is placed within the <span class="mmd">meta_metadata_respository</span> element</li>	
    <li>the restaurant name is missing, that information will use the <span class="mmdVal">title</span> field inherited from the <span class="mmdVal">compound_document</span> class.</li>
    <li><span class="mmdVal">phone</span>, <span class="mmdVal">rating</span>, <span class="mmdVal">price_range</span> are of <span class="mmdAtt">scalar_type <span class="mmdVal">String.</li>
    <li><span class="mmdVal">pic</span>, <span class="mmdVal">link</span>, and <span class="mmdVal">map</span> are of type <span class="mmdVal">ParsedURL</span>, this is because these will be the actual URLs to an image or website.</li> 
    <li><span class="mmdVal">pic</span> and <span class="mmdVal">map</span> have the attribute  <span class="mmdAtt">hide</span> = <span class="mmdVal">false</span>, because the URLs of these images don't need to be displayed to the user.</li>
    <li><span class="mmdVal">genres</span> is a collection, meaning it will hold a list of objects of type search result. This is accommodate restaurants with many food genres.</li>
</ul>
<div class="subpoint">
<b>Note:</b> To use your newly defined <span class="mmd">meta_metadata</span> in an application, you may need to compile it into source codes with <b>MetaMetadata Compiler</b>.
The compiler is in the package <span class="mmd" style="color: black;">ecologylab.semantics.compiler</span> in project <span class="mmd" style="color: black;">simplTranslators</span> (see <a class="destination" href="environmentSetup.html">environment setup</a>).
<br /><br />
With Eclipse, launch files named as <span class="mmd" style="color: black;">CompileMmdTo*.launch</span> (where * is your target language name) are available in that project for you to run the compiler conveniently.
</div>
<h5>
Hopefully now you have learned how a data structure is defined for a <span class="mmd">meta_metadata</span> object.
</h5><br/>
The next tutorial will cover <a class="destination" href="informationExtraction.html">information extraction<a>.

</div>


</div>
</body></html>
