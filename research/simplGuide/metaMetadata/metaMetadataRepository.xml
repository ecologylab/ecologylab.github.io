<meta_metadata_repository name="default_repository" default_user_agent_name="chrome_2"
 package="ecologylab.semantics.generated.library"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >
	<user_agents>
		<user_agent name="ie_5" string="Mozilla/4.0 (compatible; MSIE 5.5; Windows NT 5.0"/>
		<user_agent name="firefox_2" string="Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.7) Gecko/20070914 Firefox/2.0.0.7"/>
		<user_agent name="firefox_3_5" string="Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 (.NET CLR 3.5.30729)"/>
		<user_agent name="chrome_2" string="Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US) AppleWebKit/530.5 (KHTML, like Gecko) Chrome/2.0.172.43 Safari/530.5"/>
		<user_agent name="google_bot_0" string="Googlebot/2.1 (+http://www.google.com/bot.html)"/>
		<user_agent name="google_bot_1" default="true" string="Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)"/>
		<user_agent name="google_bot_2" string="Googlebot/2.1 (+http://www.googlebot.com/bot.html)"/>
		<user_agent name="opera_9" string="Opera/9.25 (Windows NT 6.0; U; en)"/>
	</user_agents>
	
	 <search_engines>
		<search_engine name="google" url_prefix="http://www.google.com/search?hl=en&amp;q=" numResultString="&amp;num=" startString="&amp;start="/>
		<search_engine name="my_google" url_prefix="http://staging.cs.tamu.edu:8080/my_google/search?query=" numResultString="&amp;resultsPerPage=" startString="&amp;startIndex="/>
		<search_engine name="yahoo" url_prefix="http://api.search.yahoo.com/WebSearchService/V1/webSearch?appid=yahoosearchwebrss&amp;query=" numResultString="&amp;result=" startString="&amp;start="/>
		<search_engine name="yahoo_image" url_prefix="http://api.search.yahoo.com/ImageSearchService/V1/imageSearch?appid=yahoosearchwebrss&amp;query=" numResultString="&amp;result=" startString="&amp;start="/>
		<search_engine name="yahoo_news" url_prefix="http://api.search.yahoo.com/NewsSearchService/V1/newsSearch?appid=yahoosearchwebrss&amp;query=" numResultString="&amp;result=" startString="&amp;start="/>
		<search_engine name="flickr" url_prefix="http://www.flickr.com/search/?q=" url_suffix="&amp;s=int&amp;z=m"/>
		<search_engine name="flickr_author" url_prefix="http://www.flickr.com/photos/" url_suffix="/"/>
		<search_engine name="flickr_tag" url_prefix="http://www.flickr.com/photos/tags/" url_suffix="/interesting/"/>
		<search_engine name="wikipedia" url_prefix="http://en.wikipedia.org/w/index.php?title=Special%3ASearch&amp;redirs=1&amp;search=" numResultString="&amp;limit=" startString="&amp;offset=" url_suffix="&amp;fulltext=Search&amp;ns0=1" />
		<search_engine name="google_patents" url_prefix="http://www.google.com/patents?q=" numResultString="&amp;num=" startString="&amp;start="/>
	</search_engines>

	<named_styles>
		<named_style name="default" font_size="10"/>
		<named_style name="h1" font_size="11" font_style="1"/>
	</named_styles>	
	
	<!--+++++++++++++++++++++++++++++++++ Builtin Primitive Base Types  +++++++++++++++++++++++++++++++++-->
	
	<!-- The Declaration of Document Class  -->
	<meta_metadata name="document" extends="metadata" generate_class="false" comment="The Document Class" >
		<meta_metadata_field name="title" scalar_type="String" style="h1" comment="The Title of the Document" navigates_to="location"/>
		<meta_metadata_field name="description" scalar_type="String"/>
		<meta_metadata_field name="location" scalar_type="ParsedURL" always_show="true" comment="The document's actual location."/>
		<meta_metadata_field name="generation" scalar_type="Int"/>
		<meta_metadata_field name="page_structure" scalar_type="String" comment="For debugging. Type of the structure recognized by information extraction."/>
		<meta_metadata_field name="query" scalar_type="String" comment="The search query"/>
	</meta_metadata>
	
	<!-- The Declaration of Entity Class  -->
	<meta_metadata name="entity" extends="metadata" generate_class="false" comment="Reference to a nested document." >
		<meta_metadata_field name="location" scalar_type="ParsedURL" hide="true" comment="The document's actual location."/>
		<meta_metadata_field name="gist" scalar_type="String" navigates_to="location" comment="Initial text that describes the document before its downloaded."/>
	</meta_metadata>
	
		<!-- PDF Class -->
	<meta_metadata name="pdf" parser="pdf" extends="document" comment="The PDF class.">
		<meta_metadata_field name="author" scalar_type="String" comment="The author of the pdf document"/>
		<meta_metadata_field name="summary" scalar_type="String" comment="Summary of the pdf document"/>
		<meta_metadata_field name="keywords" scalar_type="String" comment="Key Words of the document"/>
		<meta_metadata_field name="subject" scalar_type="String" comment="Subject of the document"/>
		<meta_metadata_field name="trapped" scalar_type="String" />
		<meta_metadata_field name="modified" scalar_type="String" />
		<meta_metadata_field name="contents" scalar_type="String" comment="Contents of the document"/>
		<meta_metadata_field name="creationdate" scalar_type="String" comment="Creation date of the document"/>
		<mime_type>application/pdf</mime_type>
		<mime_type>application/x-pdf</mime_type>
		<mime_type>image/pdf</mime_type>
		<suffix>pdf</suffix> 
	</meta_metadata>
	
	<!-- -The Declaration of Media Class -->
	<meta_metadata name="media" generate_class ="false" extends="metadata" comment="Extend this for Image, sounds, video, etc.">
		<meta_metadata_field name="context" scalar_type="String" />
	</meta_metadata>
	
	<!-- The Declaration of Image Class -->
	<meta_metadata name="image" extends="media" generate_class="false" comment="The Image Base Class">
		<meta_metadata_field name="caption" style="h1" scalar_type="String" comment="The caption of the image."/>
		<meta_metadata_field name="location" scalar_type="ParsedURL" comment="Location of the image."/>
		<meta_metadata_field name="nav_location" scalar_type="ParsedURL" />
		<meta_metadata_field name="local_location" scalar_type="String" hide="true" comment="Relative location of local copy of image."/>
	</meta_metadata>
	
	<meta_metadata name="debug_metadata" generate_class="false">
		<meta_metadata_field name="term_vector" scalar_type="StringBuilder" ignore_in_term_vector="true" />
		<meta_metadata_field name="term_weights" scalar_type="StringBuilder" ignore_in_term_vector="true" />
	</meta_metadata>
	

<!--+++++++++++++++++++++++++++++++++ More Specific Types - Extend Document Directly  +++++++++++++++++++++++++++++++++-->
	
	<!-- The Declaration for DLMS class -->
	<meta_metadata name="dlms" extends="document" comment="The DLMS Class">
	 	<meta_metadata_field name="subject" scalar_type="String" />
	</meta_metadata>
	
	<!-- The Declaration for ICDL class -->
	<meta_metadata name="icdl" extends="document" comment="The ICDL class">
		<meta_metadata_field name="languages" scalar_type="String" />
	</meta_metadata>
	
	<!-- The Declaration ofr NSDL class -->
	<meta_metadata name="nsdl" extends="document" comment="The NSDL class">
		<meta_metadata_field name="subject" scalar_type="String" />
	</meta_metadata>
	
	<!-- Declaration of Text Class -->
	<meta_metadata name="text" extends ="media" comment="The Text Class">
		<meta_metadata_field name="text" scalar_type="String" />
	</meta_metadata>
	
	<!-- The Declaration of Dc_Document Class -->
	<meta_metadata name="dc_document" extends="document" comment="">
		<meta_metadata_field name="subject" scalar_type="String" />
		<mixins>search</mixins>
	</meta_metadata>

	
<!--+++++++++++++++++++++++++++++++++ More Specific Types - Search & its Children  +++++++++++++++++++++++++++++++++-->
	
	<!-- Search Class -->
	<meta_metadata name="search" extends="document" comment="">
		<meta_metadata_field name="searchResults" collection="ArrayList" collection_child_type="search_result" >
			<meta_metadata_field name="heading" scalar_type="String" comment="The heading of search result"/>
			<meta_metadata_field name="snippet" scalar_type="String"  comment="The snippet of search result"/>
 			<meta_metadata_field name="link" scalar_type="ParsedURL" comment="The link of the search result" /> 
	   </meta_metadata_field>
	   
	</meta_metadata>
	
	 <meta_metadata name="google_search" type="search"  parser="xpath" url_stripped="http://www.google.com/search" user_agent_name="opera_9" comment="The google Search class" >
	 	<meta_metadata_field name="searchResults" xpath="//div[@id='res']//div//ol/li[@*]" >
			<meta_metadata_field name="heading" xpath="./h3/a" />
			<meta_metadata_field name="snippet" xpath="./div[1]" />
 			<meta_metadata_field name="link"    xpath="./h3/a/@href" /> 
	   </meta_metadata_field>
	   <semantic_actions>
	   		<get_field name="searchResults"/>
			<for_each collection="searchResults" as="res">
				<get_field name="link" object="res"/>
				<parse_now>
					<arg value="link" name="container_link"/>
				</parse_now>
			</for_each>
		</semantic_actions>
  </meta_metadata>
  
  <meta_metadata name="my_google_search" type="search"  parser="xpath" url_stripped="http://staging.cs.tamu.edu:8080/my_google/search" user_agent_name="opera_9" comment="The my_google Search class" >
	 	<meta_metadata_field name="searchResults" xpath="//div[@class='result']" >
			<meta_metadata_field name="heading" xpath="./a/@href" />
			<meta_metadata_field name="snippet" xpath="./p" />
 			<meta_metadata_field name="link"    xpath="./span" /> 
	   </meta_metadata_field>
	   <semantic_actions>
	   		<get_field name="searchResults"/>
			<for_each collection="searchResults" as="res">
				<get_field name="link" object="res"/>
				<parse_now>
					<arg value="link" name="container_link"/>
				</parse_now>
			</for_each>
		</semantic_actions>
  </meta_metadata>
	
  <meta_metadata name="WikipediaSearch" type="search" parser="xpath"  url_stripped="http://en.wikipedia.org/w/index.php?title=Special%3ASearch" user_agent_name="firefox_2" comment="Wikipedia Web Search Class">
	 <meta_metadata_field name="searchResults" xpath="//div[@id='bodyContent']/div[@class='searchresults']/ul[@class='mw-search-results']/li" >
  		<meta_metadata_field name="heading" xpath="./a" /> 
  		<meta_metadata_field name="link"    xpath="./a/@href"  /> 
  		<meta_metadata_field name="snippet" xpath="./div[@class='searchresult']" /> 
  	</meta_metadata_field>
	<semantic_actions>
	  <get_field name="searchResults" /> 
		<for_each collection="searchResults" as="res">
		  <get_field name="link" object="res" /> 
		  <parse_now>
			<arg value="link" name="container_link"/> 
  		  </parse_now>
  	 </for_each>
  	</semantic_actions>
  </meta_metadata>

    
    <!-- Declaration of Yahoo search class -->
    <meta_metadata name="ResultSet" extends="search" parser="direct" comment="Yahoo Web Search Class">
  		<meta_metadata_field name="Result" collection="ArrayList" collection_child_type="result" comment="Collection of results for yahoo search">
  			<meta_metadata_field name="Title" scalar_type="String"/>
  			<meta_metadata_field name="Summary" scalar_type="String"/>
  			<meta_metadata_field name="Url" scalar_type="ParsedURL"/>
  			<meta_metadata_field name="RefererUrl" scalar_type="ParsedURL"/>
  			<!-- meta_metadata_field name="DisplayUrl" scalar_type="ParsedURL"/-->
  			<meta_metadata_field name="ModificationDate" scalar_type="Int"/>
  			<meta_metadata_field name="MimeType" scalar_type="String"/>
		    <meta_metadata_field name="Thumbnail" collection="ArrayList" collection_child_type="thumbnail">
		  		<meta_metadata_field name="Url" scalar_type="ParsedURL"/>
		    </meta_metadata_field>
  		</meta_metadata_field>
    </meta_metadata>
     
    <meta_metadata name="yahoo_web_search"  type="ResultSet" url_stripped="http://api.search.yahoo.com/WebSearchService/V1/webSearch">
   		<semantic_actions>
    		<get_field name="Result"/>
    		<for_each collection="Result" as="res">
    			<get_field name="Url" object="res"/>
    			<get_field name="Summary" object="res"/>
    			<parse_now>
					<arg value="Url" name="container_link"/>
					<arg value="Summary" name="anchor_text"	/>		
				</parse_now>
    		</for_each>	
    	</semantic_actions>
    </meta_metadata>

    <meta_metadata name="yahoo_image_search"  type="ResultSet" url_stripped="http://api.search.yahoo.com/ImageSearchService/V1/imageSearch">
   		<semantic_actions>
    		<get_field name="Result"/>
    		<for_each collection="Result" as="res">
    			<get_field name="Url" object="res"/>
    			<get_field name="RefererUrl" object="res"/>
    			<get_field name="Summary" object="res"/>
	   			<create_and_visualize_img_surrogate>
   					<arg value="Url" name="image_purl"/>
	   				<arg value="Summary" name="caption"/>
	   				<arg value="RefererUrl" name="href"/>
	   			</create_and_visualize_img_surrogate>
    		</for_each>	
    	</semantic_actions>
    </meta_metadata>    
    
    <meta_metadata name="yahoo_news_search"  type="ResultSet" url_stripped="http://api.search.yahoo.com/NewsSearchService/V1/newsSearch">
 	   <semantic_actions>
    		<get_field name="Result"/>
    		<for_each collection="Result" as="res">
    			<get_field name="Url" object="res"/>
    			<get_field name="Summary" object="res"/>
				<parse_now>
					<arg value="Url" name="container_link"/>
					<arg value="Summary" name="anchor_text"/>
				</parse_now>
    		</for_each>	
    	</semantic_actions>
    </meta_metadata>   		    

   	<meta_metadata name="flickr_tag" extends="metadata" package="ecologylab.semantics.library.flickr">
		<meta_metadata_field name="tag_name" scalar_type="String" navigates_to="tag_link" />
		<meta_metadata_field name="tag_link" scalar_type="ParsedURL" hide="true"/>
	</meta_metadata>    
    <meta_metadata name="flickr_image" extends="image" domain="flickr.com" url_regex="http://farm[0-9].static.flickr.com" comment="A Flickr Image" package="ecologylab.semantics.library.flickr">
    	<meta_metadata_field name="browse_purl" scalar_type="ParsedURL" hide="true"/>
		<meta_metadata_field name="flickr_tags" collection="ArrayList" collection_child_type="flickr_tag" generate_class="false"/>
   </meta_metadata>
    
   <meta_metadata name="flickr_search" extends="document" parser="xpath" url_stripped="http://www.flickr.com/search/" user_agent_name="firefox_2" comment="The flickr search class" package="ecologylab.semantics.library.flickr">
   		<meta_metadata_field name="flickr_results" collection="ArrayList" collection_child_type="flickr_image" generate_class="false" xpath="//div[@class='DetailResults']//div[@class='box']">
    		<meta_metadata_field name="caption" xpath=".//h3[@class='PicTitle']"/>
	    	<meta_metadata_field name="location" xpath=".//span//img/@src"/>
	    	<meta_metadata_field name="browse_purl" xpath=".//span//a/@href" />
	    	<meta_metadata_field name="flickr_tags" collection="ArrayList" collection_child_type="flickr_tag" generate_class="false" xpath=".//div['ListThings']//a[starts-with(@href,'/photos/tag')]" >
	   			<meta_metadata_field name="tag_name" xpath="."/>
	   			<meta_metadata_field name="tag_link" xpath="./@href"/>
	   		</meta_metadata_field>
   		</meta_metadata_field>
	    <semantic_actions>
	   		<get_field name="flickr_results"/>
	   		<for_each collection="flickr_results" as="res">
	   			<get_field name="browse_purl" object="res"/>
	   			<get_field name="location" object="res"/>
	   			<get_field name="caption" object="res"/>
	   			<create_and_visualize_img_surrogate name="imgSurrogate">
   					<arg value="location" name="image_purl"/>
	   				<arg value="caption" name="caption"/>
	   				<arg value="browse_purl" name="href"/>
	   			</create_and_visualize_img_surrogate>
	   			<set_metadata object="imgSurrogate">
   					<arg value="res" name="field_value"/>
	   			</set_metadata>
	    		<get_field name="flickr_tags" object="res"/>
	    		<for_each collection="flickr_tags" as="tag">
	    			<get_field name="tag_link" object="tag"/>
	    			<get_field name="tag_name" object="tag"/>
	 	   			<parse_later>
						<arg value="tag_link" name="container_link"/>
						<arg value="tag_name" name="anchor_text"/>
					</parse_later>
		    	</for_each>
	   		</for_each>
	      </semantic_actions>
    </meta_metadata>
    
     
    <meta_metadata name="flickr_image_detail" extends="document" parser="xpath" domain="flickr.com" url_regex="http://www.flickr.com/photos/(?!tags)[A-z0-9_@-]+/[0-9]+" comment="A Flickr Image result page" package="ecologylab.semantics.library.flickr">
 		<def_var name="photoTD" xpath="//td[@id='photoswftd']" type="node"/>
    	<meta_metadata_field name="title" xpath="./h1" context_node="photoTD"/>
    	<meta_metadata_field name="description" xpath="./div[@id='About']/div[@class='photoDescription']" ignore_in_term_vector="true" context_node="photoTD"/>
    	<meta_metadata_field name="flickr_image" is_nested="true" xpath="//td[@id='photoswftd']" generate_class="false" hide="true">
		   	<meta_metadata_field name="location"  xpath=".//div[@class='photoImgDiv']/img[1]/@src" />
		   	<meta_metadata_field name="caption" xpath="./h1" />
	    	<meta_metadata_field name="flickr_tags" collection="ArrayList" collection_child_type="flickr_tag" xpath="//div[@id='thetags']//div"  generate_class="false">
	   			<meta_metadata_field name="tag_name" xpath="./a[@class='Plain']"/>
	   			<meta_metadata_field name="tag_link" xpath="./a[@class='Plain']/@href" text_regex="/photos/(\w+)/s*" match_replacement="/photos/"/>
		   	</meta_metadata_field>
    	</meta_metadata_field>
    	<semantic_actions>
    		<get_field name="flickr_image"/>
    		<get_field name="location" object="flickr_image"/>
    		<get_field name="caption" object="flickr_image"/>
			<create_and_visualize_img_surrogate name="imgSurrogate">
   				<arg value="location" name="image_purl"/>
    			<arg value="caption" name="caption"/>
    		</create_and_visualize_img_surrogate>
    		<set_metadata object="imgSurrogate">
    			<arg value="flickr_image" name="field_value"/>
    		</set_metadata>
    		<get_field name="flickr_tags" object="flickr_image"/>
    		<for_each collection="flickr_tags" as="tag">
    			<get_field name="tag_link" object="tag"/>
    			<get_field name="tag_name" object="tag"/>
 	   			<parse_later>
					<arg value="tag_link" name="container_link"/>
					<arg value="tag_name" name="anchor_text"/>
				</parse_later>
	    	</for_each>
    	</semantic_actions>
    </meta_metadata>
    
        
    <meta_metadata name="flickr_link" extends="metadata" package="ecologylab.semantics.library.flickr">
    	<meta_metadata_field name="link" scalar_type="ParsedURL" comment="flickr_image_detail"  hide="true"/>
   		<meta_metadata_field name="title" scalar_type="String" comment="flickr_image_detail" navigates_to="link"/>
    </meta_metadata>
    
        <!-- All images submitted by a user -->
    <meta_metadata name="flickr_author" parser="xpath" extends="document" domain="flickr.com" url_regex="http://www.flickr.com/photos/(?!tags)[A-z0-9_@-]+/$" comment="All flickr photos of a particular user" package="ecologylab.semantics.library.flickr">
    	<meta_metadata_field name="flickr_link_set" collection="ArrayList" collection_child_type="flickr_link" xpath="//p[@class='Photo']" comment="Collection of all images of a user" generate_class="false">
    		<meta_metadata_field name="link" xpath="./span/a/@href" />
    		<meta_metadata_field name="title" xpath="./span/a/@title" text_regex="by \w*"  match_replacement="" />
    	</meta_metadata_field>
    	<semantic_actions>
    		<get_field name="flickr_link_set"/>
    		<for_each collection="flickr_link_set" as="res">
    			<get_field name="link" object="res"/>
    			<get_field name="title" object="res"/>
				<parse_later>
					<arg value="link" name="container_link"/>
					<arg value="title" name="anchor_text"/>
				</parse_later>
    		</for_each>
    	</semantic_actions>
    </meta_metadata>
 
     <meta_metadata name="flickr_tags_interesting" parser="xpath" extends="search" domain="flickr.com" url_regex="http://www.flickr.com/photos/tags/[a-z0-9]+/interesting/$" comment="Used for flickr search results" package="ecologylab.semantics.library.flickr">
    	<meta_metadata_field name="flickr_link_set" collection="ArrayList"  collection_child_type="flickr_link" xpath="//span[@class='photo_container pc_t']" generate_class="false" comment="Collection of all images of a user">
    		<meta_metadata_field name="link" xpath="./a/@href" />
    	</meta_metadata_field>
    	<semantic_actions>
    		<get_field name="flickr_link_set"/>
    		<for_each collection="flickr_link_set" as="res">
    			<get_field name="link" object="res"/>
    			<parse_now>
					<arg value="link" name="container_link"/>
				</parse_now>
    		</for_each>
    	</semantic_actions>
    </meta_metadata>
    
    <meta_metadata name="flickr_tags" parser="xpath" extends="document" domain="flickr.com" url_regex="http://www.flickr.com/photos/tags/[a-z0-9]+/$" comment="For flickr crawled tags" package="ecologylab.semantics.library.flickr">
    	<meta_metadata_field name="flickr_link_set" collection="ArrayList" collection_child_type="flickr_link" xpath="//span[@class='photo_container pc_t']" generate_class="false" comment="Collection of all images of a user">
    		<meta_metadata_field name="link" xpath="./a/@href" />
    	</meta_metadata_field>
    	<semantic_actions>
    		<get_field name="flickr_link_set"/>
    		<for_each collection="flickr_link_set" as="res">
    			<get_field name="link" object="res"/>
    			<parse_now>
					<arg value="link" name="container_link"/>			
				</parse_now>				
    		</for_each>
    	</semantic_actions>
    </meta_metadata>
    
    <!-- NOTE :: Use Lower case characters for all names. XML convention has no capital letters for tag names. We follow a similar convention. Any uppper case chars in the name will cause issues ! -->
<!-- /html/body/div[@id='Main']/div[@id='BodyContainer']/div[@id='ResultsContainer']/div[@id='just_results']/div[1]/div[1]/div/div[1]/div/span/a/img-->
<!-- /html/body/div[@id='Main']/div[@id='BodyContainer']/div[@id='ResultsContainer']/div[@id='just_results']/div[1]/div[2]/div/div[1]/div/span/a/img-->
    
 <meta_metadata name="wikipedia_page" extends="document" parser="xpath" url_path_tree="http://en.wikipedia.org/wiki/" package="ecologylab.semantics.generated.library" comment="An article on wikipedia">
 	<def_var name="main_image" xpath="//*[starts-with(@class,'infobox')]//img[1]" type="node"/>
  	<meta_metadata_field name="title" xpath="//h1[@id='firstHeading']" /> 
 	<meta_metadata_field name="description" xpath="//div[@class='bodycontent' and 1]/p[1]" /> 
  	<meta_metadata_field name="main_image_src" scalar_type="ParsedURL" context_node="main_image" xpath="./@src" hide="true"/>
	<meta_metadata_field name="paragraphs" collection="ArrayList" xpath="//div[@id='bodyContent']/p/a[starts-with(@href,'/wiki/')]/.." collection_child_type="paragraph" comment="" hide="true">
  		<meta_metadata_field name="paragraph_text" scalar_type="String" xpath="string(.)" /> 
		<meta_metadata_field name="anchors" collection="ArrayList" xpath="./a[starts-with(@href,'/wiki/')]" collection_child_type="anchor">
  			<meta_metadata_field name="link" scalar_type="ParsedURL" xpath="./@href" comment="" /> 
  			<meta_metadata_field name="anchor_text" scalar_type="String" xpath="string(.)" /> 
  		</meta_metadata_field>
 	 </meta_metadata_field>
	<meta_metadata_field name="categories" collection="ArrayList" xpath="//div[@id='mw-normal-catlinks']//a[starts-with(@href,'/wiki/Category:')]" collection_child_type="category" comment="Wikipedia Categories">
  		<meta_metadata_field name="name" scalar_type="String" xpath="string(.)" navigates_to="cat_link"/> 
  		<meta_metadata_field name="cat_link" scalar_type="ParsedURL" xpath="./@href" hide="true"/> 
  </meta_metadata_field>
  <meta_metadata_field name="thumbinners" collection="ArrayList" xpath="//div[@class='thumbinner']" collection_child_type="thumbinner" hide="true">
  	<meta_metadata_field name="thumb_img_src" scalar_type="ParsedURL" xpath="./a/img/@src" /> 
  	<meta_metadata_field name="thumb_img_caption" scalar_type="String" xpath="string(.)" /> 
  </meta_metadata_field>
	<semantic_actions>
		<get_field name="main_image_src">
  			<check condition="NOT_NULL" name="imageFound" /> 
 		 </get_field>
  		 <if>
			<flag_check value="imageFound" /> 
  			<create_and_visualize_img_surrogate>
				<arg value="main_image_src" name="image_purl"/>
  			</create_and_visualize_img_surrogate>
  		</if>
  		<get_field name="paragraphs" /> 
	  		<for_each collection="paragraphs" as="para">
  				<get_field name="paragraph_text" object="para" /> 
  				<get_field name="anchors" object="para" />  				
					<for_each collection="anchors" as="anch">
						<get_field name="link" object="anch">
 							<check condition="NOT_NULL" name="gotLink" /> 
  						</get_field>
						 <get_field name="anchor_text" object="anch">
							<check condition="NOT_NULL" name="gotAnchorText" /> 
  						</get_field>
  						 <if>
					 		<flag_check value="gotAnchorText" /> 
  							<flag_check value="gotLink" /> 
							<create_semantic_anchor>
								<arg value="link" name="href"/> 
 								<arg value="anchor_text" name="anchor_text"/> 
  								<arg value="paragraph_text" name="anchor_context"/> 
  							</create_semantic_anchor>
  						</if>
  				</for_each>
  				<create_and_visualize_text_surrogate>
					<arg value="paragraph_text" name="text"/>
				</create_and_visualize_text_surrogate>
  		</for_each>
  		<get_field name="thumbinners" /> 
		<for_each collection="thumbinners" as="thumbinner">
			<get_field name="thumb_img_src" object="thumbinner">
  				<check condition="NOT_NULL" name="gotImageSrc" /> 
	  		</get_field>
			<get_field name="thumb_img_caption" object="thumbinner">
  				<check condition="NOT_NULL" name="gotImageCaption" /> 
	  		</get_field>
	  		 <if>
  				<flag_check value="gotImageSrc" /> 
	  		 	<flag_check value="gotImageCaption" /> 
				<create_and_visualize_img_surrogate>
					<arg value="thumb_img_src" name="image_purl"/>
					<arg value="thumb_img_caption" name="caption"/>
	  			</create_and_visualize_img_surrogate>
	  		</if>
	  </for_each>
  </semantic_actions>
 </meta_metadata>
    
    <!-- THE RSS CLASS : RSS Type -->
	<meta_metadata name="rss" parser="direct" extends="document" user_agent_name="google_bot_0" comment="The RSS class">
		<suffix>rss</suffix>
		<mime_type>xml/rss</mime_type>
		<mime_type>application/rss</mime_type>
		<meta_metadata_field name="channel" is_nested="true">
			<meta_metadata_field name="item" collection="ArrayList" collection_child_type="item" >
				<meta_metadata_field name="title" scalar_type="String" />
				<meta_metadata_field name="guid" scalar_type="ParsedURL" />
			</meta_metadata_field>
		</meta_metadata_field>
		<semantic_actions>
			<get_field name="channel" />
			<get_field name="item" object="channel" />
			<for_each collection="item" as="i">
				<get_field name="guid" object="i" />
				<get_field name="title" object="i" />
				<parse_later>
					<arg value="guid" name="container_link"/>
					<arg value="title" name="anchor_text"/>
				</parse_later>
			</for_each>
		</semantic_actions>		
	</meta_metadata>		
    
    <meta_metadata name="xml" parser="direct" generate_class="false"  extends="document" user_agent_name="google_bot_0" comment="XML">
    	<mime_type>text/xml</mime_type>
    	<mime_type>application/xml</mime_type>
    	<suffix>xml</suffix>
    </meta_metadata>
    
	<!-- Icdl_Image Class -->
	<meta_metadata name="icdl_image" extends="image" comment="Image from The Interantional Children's digital library.">
		<meta_metadata_field name="languages" scalar_type="String" comment="The language of the library"/>
	</meta_metadata>
	
	<!-- University of Amsterdam -->
	<meta_metadata name="topic" extends="document" package="ecologylab.semantics.library.uva" comment="For Collabartion with UVA's Cluster formation project.">
		<meta_metadata_field name="content_keywords" always_show="true" scalar_type="StringBuilder" comment=""/>
		<meta_metadata_field name="anchor_keywords" always_show="true" scalar_type="StringBuilder" comment=""/>
		<meta_metadata_field name="url_keywords" always_show="true" scalar_type="StringBuilder" comment=""/>
		<meta_metadata_field name="title_keywords" always_show="true" scalar_type="StringBuilder" comment=""/>
		<meta_metadata_field name="id" scalar_type="Int" comment=""/>
	</meta_metadata>
	
<!--+++++++++++++++++++++++++++++++++ !!!Scholarly Articles!!! +++++++++++++++++++++++++++++++++-->
	<meta_metadata name="source" package="ecologylab.semantics.library.scholarlyPublication" extends="document" comment="Metadata related to where an article is published.">
		<meta_metadata_field name="year_of_publication" scalar_type="Int"  is_facet="true"/>
		<meta_metadata_field name="archive" hide="true" scalar_type="ParsedURL"  comment="Archive of conference or journal."/>
		<meta_metadata_field name="pages" navigates_to="table_of_contents" scalar_type="String" layer="-1"/>
		<meta_metadata_field name="isbn" scalar_type="String"  comment=""/>
	</meta_metadata>
	
	<meta_metadata name="author" package="ecologylab.semantics.library.scholarlyPublication" extends="document" comment="An author of an article or creative work.">
		<meta_metadata_field name="name" scalar_type="String"  is_facet="true" comment="" navigates_to="location"/>
		<meta_metadata_field name="affiliation" scalar_type="String"  comment=""/>
		<meta_metadata_field name="location" hide="true"/>
	</meta_metadata>
	
	<meta_metadata name="scholarly_article" extends="pdf" package="ecologylab.semantics.library.scholarlyPublication">		
		<meta_metadata_field name="metadata_page" shadows="location" scalar_type="ParsedURL" comment="citation.cfm"/>
		<meta_metadata_field name="abstractField" shadows="summary" scalar_type="String" comment="" tag="abstract"/>		
		<meta_metadata_field name="source" is_nested="true" comment="Metadata related to where this article was published."/>
		<meta_metadata_field name="authors" shadows="author" collection="ArrayList" collection_child_type="author" comment="Set of authors."/>
		<meta_metadata_field name="references" entity="true" collection="ArrayList" collection_child_type="scholarly_article" child_tag="reference" comment="Papers cited by this paper."/>
		<meta_metadata_field name="citations" entity="true" collection="ArrayList" collection_child_type="scholarly_article" child_tag="citation" comment="Papers that cite this paper."/>
	</meta_metadata >

  <!-- ACM portal class -->
  <meta_metadata name="acm_portal" parser="xpath" url_stripped="http://portal.acm.org/citation.cfm" type="scholarly_article"  generate_class="false">
		<meta_metadata_field name="title" xpath="//td[@class='medium-text']/strong/child::text()" navigates_to="metadata_page"/>
		<meta_metadata_field name="location" xpath="//a[@name='FullText']/@href"/>
		<meta_metadata_field name="abstract" xpath="//p[@class='abstract']/child::text()"/>				
		<meta_metadata_field name="source" is_nested="true" xpath="//td[@class='small-text' and @colspan='2']" generate_class="false" navigates_to="location">
			<meta_metadata_field name="title" xpath="./span[@class='mediumb-text'][1]" />
			<meta_metadata_field name="archive" xpath="./a[child::text()='archive']/@href"/>
			<meta_metadata_field name="location" xpath="./a[@class='small-link-text'][2]/@href" hide="true"/>
			<meta_metadata_field name="pages" xpath=".//div[contains(.,'Pages')]" text_regex="Pages:" match_replacement=""/>
			<meta_metadata_field name="year_of_publication" xpath=".//div[contains(.,'Year')]" text_regex="Year of Publication:" match_replacement="" />
<!--		<meta_metadata_field name="isbn"  scalar_type="String"  xpath=".//div[@class='small-text']/child::text()[starts-with(.,'ISSN:') or starts-with(.,'ISBN:')]" text_regex="ISBN" match_replacement=""/>-->
		</meta_metadata_field>		
		<meta_metadata_field name="authors" xpath=".//div[@class='authors']//tr">
			<meta_metadata_field name="name" xpath="./td[1]/a"/>
			<meta_metadata_field name="affiliation" xpath="./td[2]"/>
			<meta_metadata_field name="location" xpath="./td[1]/a/@href"/>
		</meta_metadata_field>
		<meta_metadata_field name="references" xpath="//a[@name='references']/../following-sibling::table//a[@href[starts-with(.,'citation')]]">
			<meta_metadata_field name="location" xpath="./@href" />
			<meta_metadata_field name="gist" xpath="./child::text()" />
		</meta_metadata_field>
		<meta_metadata_field name="citations" xpath=".//a[@name='citings']/../following-sibling::table//a[@href[starts-with(.,'citation')]]">
			<meta_metadata_field name="location"  xpath="./@href" />
			<meta_metadata_field name="gist" xpath="./child::text()" />
		</meta_metadata_field>
		<semantic_actions>
			<set_field name="metadata_page" object="metadata">
				<arg value="TRUE_PURL" name="field_value"/>
			</set_field>
			<get_field name="location">
				<check condition="NOT_NULL" name="fullTextFlag"/>
			</get_field>
			<if>
				<flag_check value="fullTextFlag"/>
				<parse_now>
					<arg value="metadata" name="document"/>
				</parse_now>	
			</if>
			<get_field name="references">
				<check condition="NOT_NULL" name="referenceFlag"/>
			</get_field>
		
			<if>
				<flag_check value="referenceFlag"/>
				<for_each collection="references" as="ref">
					<get_field name="gist" object="ref"/> 
					<parse_later>
						<arg value="ref" name="entity"/>
						<arg value="gist" name="anchor_text"/><!-- Use the gist as semanticAnchorText-->
						<arg value="true" name="citation_sig"/>
					</parse_later>
				</for_each>
			</if>
			
			<get_field name="citations">
				<check condition="NOT_NULL" name="citFlag"/>
			</get_field>
			<if>
				<flag_check value="citFlag"/>
				<for_each collection="citations" as="cit">
					<get_field name="location" object="cit"/>
					<get_field name="gist" object="cit"/>
					<parse_later>
						<arg value="cit" name="entity"/>
						<arg value="gist" name="anchor_text"/><!-- Use the gist as semanticAnchorText-->
						<arg value="true" name="citation_sig"/>
					</parse_later>
				</for_each>
			</if>
		</semantic_actions>
	</meta_metadata>
	
	<!-- ACM proceedings class -->
  	<meta_metadata name="acm_proceeding" parser="xpath" url_stripped="http://portal.acm.org/toc.cfm" extends="document" >
  		<meta_metadata_field name="proceedings" collection="ArrayList" collection_child_type="acm_proceeding_page" hide="true" xpath="//tr[position()>2 and 8>position()]/td/table[@cellpadding='0']" >
			<meta_metadata_field name="location" xpath="./tr/td/strong/a/@href" />
			<meta_metadata_field name="gist" xpath="./tr/td/strong" />
		</meta_metadata_field>
		<meta_metadata_field name="papers" xpath="//tr[position()>1]/td[2]/a[@class='medium-text']" collection_child_type="scholarly_article" collection="ArrayList" >
			<meta_metadata_field name="location" xpath="./@href" />
			<meta_metadata_field name="gist" xpath="." />
		</meta_metadata_field>
		<semantic_actions>
			<get_field name="proceedings">
				<check condition="NOT_NULL" name="proceedingsFlag"/>
			</get_field>
			<if>
				<flag_check value="proceedingsFlag"/>
				<for_each collection="proceedings" as="proceeding">
					<get_field name="location" object="proceeding"/>
					<get_field name="gist" object="proceeding"/>
					<parse_later>
						<arg value="proceeding" name="entity"/>
						<arg value="gist" name="anchor_text"/><!-- Use the title of the proceeding as semanticAnchorText-->
					</parse_later>
				</for_each>
			</if>
			<get_field name="papers">
				<check condition="NOT_NULL" name="papersFlag"/>
			</get_field>
			<if>
				<flag_check value="papersFlag"/>
				<for_each collection="papers" as="paper">
					<get_field name="location" object="paper"/>
					<get_field name="gist" object="paper"/>
					<parse_later>
						<arg value="paper" name="entity"/>
						<arg value="gist" name="anchor_text"/><!-- Use the title of the paper as semanticAnchorText-->
					</parse_later>					
				</for_each>
			</if>		
		</semantic_actions>
	</meta_metadata>
	-->
	
	
<!-- ++++++++++++++++++++++++++++++++++++++++IMDB++++++++++++++++++++++++++++++++++++++++++++
-->

<meta_metadata name="birth_detail" parser="xpath" extends="document" comment="Metadata for storing details of birth (date and place) of people" package="ecologylab.semantics.library.imdb">
	<meta_metadata_field name="day_of_birth" scalar_type="String" navigates_to="day_of_birth_link"/>
	<meta_metadata_field name="year_of_birth" scalar_type="String" navigates_to="year_of_birth_link"/>
	<meta_metadata_field name="place_of_birth" scalar_type="String" navigates_to="place_of_birth_link"/>
	<meta_metadata_field name="day_of_birth_link" scalar_type="ParsedURL" hide="true"/>
	<meta_metadata_field name="year_of_birth_link" scalar_type="ParsedURL" hide="true"/>
	<meta_metadata_field name="place_of_birth_link" scalar_type="ParsedURL" hide="true"/>
</meta_metadata>

<meta_metadata name="imdb_title" parser="xpath" extends="document" url_path_tree="http://www.imdb.com/title/" comment="IMDB metadata" package="ecologylab.semantics.library.imdb">
	<meta_metadata_field name="title"  xpath="//div[@id='tn15title']/h1" style="h1" text_regex="More [a-zA-Z\s&amp;;#0-9\-]*" match_replacement="" />
	<meta_metadata_field name="year_released" scalar_type="String" xpath="//div[@id='tn15title']/h1/span/a[1]" style="h1" />
	<meta_metadata_field name="rating" scalar_type="String" xpath="//div[@id='tn15rating']//b"/>
	<meta_metadata_field name="directors" entity="true" xpath="//div[@id='director-info']//a" collection="ArrayList" collection_child_type="person_details" generate_class="false">
		<meta_metadata_field name="gist" xpath="."/>
		<meta_metadata_field name="location" xpath="./@href"/>
	</meta_metadata_field>
	<meta_metadata_field name="writers" entity="true" xpath="//div[@class='info']/h5[starts-with(child::text(), 'Writers')]/../a" collection_child_type="person_details" collection="ArrayList" generate_class="false">
		<meta_metadata_field name="gist" xpath="."/>
		<meta_metadata_field name="location" xpath="./@href"/>
	</meta_metadata_field>
	<meta_metadata_field name="release_date"  scalar_type="String" xpath="//div[@class='info']/h5[starts-with(child::text(), 'Release')]/../child::text()"/>
	<meta_metadata_field name="genres" collection="ArrayList" collection_child_type="genre" xpath="//div[@class='info']/h5[starts-with(child::text(), 'Genre')]/..//a">
		<meta_metadata_field name="name" scalar_type="String" xpath="string(.)" text_regex="more" match_replacement="" navigates_to="genre_link"/>
		<meta_metadata_field name="genre_link" scalar_type="ParsedURL" xpath="./@href" hide="true"/> 
	</meta_metadata_field>
	<meta_metadata_field name="plot" scalar_type="String" xpath="//div[@class='info']/h5[starts-with(child::text(), 'Plot:')]/../child::text()" text_regex="more|\|" match_replacement=""/>
	<meta_metadata_field name="tagline" scalar_type="String" xpath="//div[@class='info']/h5[starts-with(child::text(), 'Tagline:')]/.." text_regex="Tagline:|more" match_replacement=""/>
	<meta_metadata_field name="cast" collection="ArrayList" collection_child_type="cast_member" xpath="//table[@class='cast']//tr">
		<meta_metadata_field name="actor" is_nested="true" xpath="td[@class='nm']" entity="true" type="person_details">
			<meta_metadata_field name="gist" xpath="string(.)"/>
			<meta_metadata_field name="location" xpath="./a/@href" /> 
		</meta_metadata_field>
		<meta_metadata_field name="character" is_nested="true" xpath="td[@class='char']" entity="true"  type="person_details">
			<meta_metadata_field name="gist" xpath="string(.)"/>
			<meta_metadata_field name="location" xpath="./a/@href" />
		</meta_metadata_field>
	</meta_metadata_field>
	<meta_metadata_field name="title_photos" collection="ArrayList" collection_child_type="image" generate_class="false" xpath="//td[1]/div[@class='media_strip_thumbs']//img/@src" hide="true">
		<meta_metadata_field name="location" xpath="." />
	</meta_metadata_field>
	<meta_metadata_field name="poster_img" scalar_type="ParsedURL" xpath="//a[@name='poster']/img/@src" hide="true"/>
	<semantic_actions>
	<get_field name="cast"/>
	
	<!-- This loop syncs the metadata for already downloaded container -->
<!--	<for_each collection="cast" as="c">-->
<!--		<get_field name="actor" object="c"/>-->
<!--	    <try_sync_nested_metadata name="synced_value">-->
<!--			<arg value="actor"/>-->
<!--	    </try_sync_nested_metadata>-->
<!--	    <set_field name="actor" object="c">-->
<!--			<arg value="synced_value"/>-->
<!--		</set_field>-->
<!--	 </for_each>-->
    <!-- End loop for syncing -->
    
	<get_field name="tagline">
		<check condition="NOT_NULL" name="tagFlag"/>
	</get_field>
	<if>
		<flag_check value="tagFlag"/>
		<create_and_visualize_text_surrogate>
			<arg value="tagline" name="text"/>
		</create_and_visualize_text_surrogate>
	</if>
	<get_field name="poster_img"/>
	<create_and_visualize_img_surrogate	name="imgSurrogate">
		<arg value="poster_img" name="image_purl"/>
	</create_and_visualize_img_surrogate>
	<get_field name="title_photos"/>
	<for_each collection="title_photos" as="photo">
		<set_field name="nav_location" object="photo">
			<arg value="TRUE_PURL" name="field_value"/>
		</set_field>
		<get_field name="location" object="photo"/>
		<create_and_visualize_img_surrogate	name="title_photos_surrogate">
			<arg value="location" name="image_purl"/>
		</create_and_visualize_img_surrogate>
	</for_each>
	<for_each collection="cast" as="c" current_index="index" size="cast_size">
		<eval_rank_wt name="rankWt">
			<arg value="index" name="index"/>
			<arg value="cast_size" name="size"/>
		</eval_rank_wt>
		<get_field name="actor" object="c"/>
		<get_field name="gist" object="actor"/>
		<parse_later>
			<arg value="actor" name="entity"/>
			<arg value="gist" name="anchor_text"/>
			<arg value="true" name="citation_sig"/>
			<arg value="rankWt" name="sig_value"/>
		</parse_later>
	</for_each>
	</semantic_actions>
</meta_metadata>

<meta_metadata name="person_details" parser="xpath" extends="document" url_path_tree="http://www.imdb.com/name/" comment="IMDB metadata" package="ecologylab.semantics.library.imdb">
	<def_var name="bio_node" type="node" xpath="//div[@class='info']/h5[starts-with(child::text(), 'Mini Biography:')]/.."/>
	<def_var name="trivia_node" type="node" xpath="//div[@class='info']/h5[starts-with(child::text(), 'Trivia:')]/.."/>
	<def_var name="awards_node" type="node" xpath="//div[@class='info']/h5[starts-with(child::text(), 'Awards:')]/.."/>
	<meta_metadata_field name="title" xpath="//div[@id='tn15title']/h1" text_regex="More [a-zA-Z\s&amp;;#0-9\-]*" match_replacement="" />
	<meta_metadata_field name="person_img" scalar_type="ParsedURL" xpath="//div[@class='photo']/a/img/@src" hide="true"/>
	<meta_metadata_field name="birth_detail" type="birth_detail" is_nested="true"  xpath="//div[@class='info']/h5[starts-with(child::text(), 'Date of Birth:')]/.." >
		<meta_metadata_field name="day_of_birth" xpath="./a[1]/child::text()"/>
		<meta_metadata_field name="year_of_birth" xpath="./a[2]/child::text()"/>
		<meta_metadata_field name="place_of_birth" xpath="./a[3]/child::text()"/>
		<meta_metadata_field name="day_of_birth_link" xpath="./a[1]/@href"/>
		<meta_metadata_field name="year_of_birth_link" xpath="./a[2]/@href"/>
		<meta_metadata_field name="place_of_birth_link" xpath="./a[3]/@href"/>
	</meta_metadata_field>
	<meta_metadata_field name="mini_biography" scalar_type="String" context_node="bio_node" xpath="./child::text()" navigates_to="biography_link"/>
	<meta_metadata_field name="biography_link" scalar_type="ParsedURL" context_node="bio_node" xpath="./a/@href" hide="true"/>
	<meta_metadata_field name="trivia" scalar_type="String" context_node="trivia_node" xpath="./child::text()" navigates_to="trivia_link"/>
	<meta_metadata_field name="trivia_link" scalar_type="ParsedURL" context_node="trivia_node" xpath="./a/@href" hide="true"/>
	<meta_metadata_field name="awards" scalar_type="String" context_node="awards_node" xpath="./child::text()" navigates_to="awards_link"/>
	<meta_metadata_field name="awards_link" scalar_type="ParsedURL" context_node="awards_node" xpath="./a/@href"  hide="true"/>
	<meta_metadata_field name="alternate_names" scalar_type="String" xpath="//div[@class='info']/h5[starts-with(child::text(), 'Alternate Names:')]/.." text_regex="Alternate Names:" match_replacement=""/>

	<meta_metadata_field name="titles_as_actor" collection="ArrayList" collection_child_type="imdb_title" 
						xpath="//div[@class='filmo']/h5/a[starts-with(@name, 'act')]/../..//a[1][starts-with(@href, '/title/')]" 
						generate_class="false" entity="true" ignore_extraction_error="true">
		<meta_metadata_field name="gist" xpath="./child::text()"/>
		<meta_metadata_field name="location" xpath="./@href" />
	</meta_metadata_field>
	<meta_metadata_field name="titles_as_director" collection="ArrayList" collection_child_type="imdb_title" 
						xpath="//div[@class='filmo']/h5/a[@name='director']/../..//a[1][starts-with(@href, '/title/')]" 
						generate_class="false" entity="true">
		<meta_metadata_field name="gist" xpath="./child::text()"/>
		<meta_metadata_field name="location" xpath="./@href" />
	</meta_metadata_field>
	
	<meta_metadata_field name="titles_for_soundtrack" collection="ArrayList" entity="true" collection_child_type="imdb_title" xpath="//div[@class='filmo']/h5/a[@name='soundtrack']/../..//a[1][starts-with(@href, '/title/')]" generate_class="false">
		<meta_metadata_field name="gist" xpath="./child::text()"/>
		<meta_metadata_field name="location" xpath="./@href" />
	</meta_metadata_field>
	<meta_metadata_field name="titles_as_producer" entity="true" collection="ArrayList" collection_child_type="imdb_title" xpath="//div[@class='filmo']/h5/a[@name='producer']/../..//a[1][starts-with(@href, '/title/')]" generate_class="false">
		<meta_metadata_field name="gist" xpath="./child::text()"/>
		<meta_metadata_field name="location" xpath="./@href" />
	</meta_metadata_field>
	<meta_metadata_field name="titles_thanked_in" collection="ArrayList" entity="true" collection_child_type="imdb_title" xpath="//div[@class='filmo']/h5/a[@name='thanks']/../..//a[1][starts-with(@href, '/title/')]" generate_class="false">
		<meta_metadata_field name="gist" xpath="./child::text()"/>
		<meta_metadata_field name="location" xpath="./@href" />
	</meta_metadata_field>
	<meta_metadata_field name="titles_as_self" collection="ArrayList" entity="true" collection_child_type="imdb_title" xpath="//div[@class='filmo']/h5/a[@name='self']/../..//a[1][starts-with(@href, '/title/')]" generate_class="false">
		<meta_metadata_field name="gist" xpath="./child::text()"/>
		<meta_metadata_field name="location" xpath="./@href" />
	</meta_metadata_field>
	<meta_metadata_field name="titles_in_development" collection="ArrayList" collection_child_type="imdb_title" entity="true" xpath="//div[@class='filmo']/h5/a[@name='indev']/../..//a[1][starts-with(@href, '/title/')]" generate_class="false">
		<meta_metadata_field name="gist" xpath="./child::text()"/>
		<meta_metadata_field name="location" xpath="./@href" />
	</meta_metadata_field>
	<semantic_actions>
		<get_field name="titles_as_actor">
			<check condition="NOT_NULL" name="hasActed"/>
		</get_field>
		<get_field name="person_img"/>
		<!--<create_and_visualize_img_surrogate> We don't want images of people.
			<arg value="person_img"/>
		</create_and_visualize_img_surrogate>
		-->
		<if>
			<flag_check value="hasActed"/>
			<for_each collection="titles_as_actor" as="tit" current_index="index" size="num_titles">
				<eval_rank_wt name="rankWt">
					<arg value="index" name="index" />
					<arg value="num_titles"  name="size"/>
				</eval_rank_wt>
				<get_field name="location" object="tit" />
				<get_field name="gist" object="tit"/>
				<parse_later>
					<arg value="tit" name="entity"/>
					<arg value="gist" name="anchor_text"/>
					<arg value="true" name="citation_sig" />
					<arg value="rankWt" name="sig_value" />
				</parse_later>
			</for_each>
		</if>
		<get_field name="titles_as_director">
			<check condition="NOT_NULL" name="hasDirected"/>
		</get_field>
		<if>
			<flag_check value="hasDirected"/>
			<for_each collection="titles_as_director" as="dir" current_index="index" size="num_titles">
				<eval_rank_wt name="rankWt">
					<arg value="index" name="index"/>
					<arg value="num_titles" name="size"/>
				</eval_rank_wt>
				<get_field name="location" object="dir"/>
				<get_field name="gist" object="dir"/>
				<parse_later>
					<arg value="dir" name="entity"/>
					<arg value="gist" name="anchor_text"/>
					<arg value="true" name="citation_sig"/>
					<arg value="rankWt" name="sig_value"/>	
				</parse_later>
			</for_each>
		</if>
	</semantic_actions>
</meta_metadata>

<meta_metadata name="google_patent_search" type="search" parser="xpath"  domain="google.com" url_regex="(?=http://www.google.com/patents)^((?!id=).)*$" user_agent_name="firefox_2" comment="Google Patents Search Class">
	 <meta_metadata_field name="searchResults" xpath="//div[@class='scontentarea']//p[last()>position()]" >
  		<meta_metadata_field name="heading" xpath="./a" /> 
  		<meta_metadata_field name="link"    xpath="./a/@href"  /> 
  	</meta_metadata_field>
	<semantic_actions>
	  <get_field name="searchResults" /> 
		<for_each collection="searchResults" as="res">
		  <get_field name="heading" object="res" /> 
		  <get_field name="link" object="res" /> 		  
		  <parse_now>
	  			<arg value="link" name="container_link"/>
	  			<arg value="heading" name="anchor_text"/>
  		  </parse_now>
  	 </for_each>
  	</semantic_actions>
  </meta_metadata>
   	
<meta_metadata name="google_patent" extends="document" parser="xpath"  url_path_tree="http://www.google.com/patents/about" user_agent_name="firefox_2" comment="Google Patents Class">
	<meta_metadata_field name="title" xpath="//div[@id='titlebar']/h1" />
  	<meta_metadata_field name="inventor" scalar_type="String" xpath="//div[@id='titlebar']/span"  />
  	<meta_metadata_field name="abstract_field" scalar_type="String" xpath="//table[@id='summarytable']/tr/td/text()"  />
  	<meta_metadata_field name="claims" scalar_type="String" xpath="//div[@id='patent_claims_v']" hide="true" />
  	<meta_metadata_field name="pic_link" scalar_type="ParsedURL" xpath="//div[@id='selected_pages_v']/div[1]/a[1]/@href" />
  	<meta_metadata_field name="referenced_bys" collection="ArrayList" collection_child_type="search_result" generate_class="false" hide="true" xpath="//div[@id='patent_referenced_by_v']/table/tr[position()>1]" >
	   		<meta_metadata_field name="heading" xpath="./td[2]"/>
	   		<meta_metadata_field name="link" xpath="./td[1]/a/@href"/>
	</meta_metadata_field> 
  	<meta_metadata_field name="citations" collection="ArrayList" collection_child_type="search_result" generate_class="false" hide="true" xpath="//div[@id='patent_citations_v']/table/tr[position()>1]" >
	   		<meta_metadata_field name="heading" xpath="./td[2]"/>
	   		<meta_metadata_field name="link" xpath="./td[1]/a/@href"/>
	</meta_metadata_field>
	<meta_metadata_field name="pic_links" collection="ArrayList" collection_child_type="search_result" generate_class="false" hide="true" xpath="//div[@id='selected_pages_v']/div/a[1]" >
	   		<meta_metadata_field name="link" xpath="./@href" />
	</meta_metadata_field> 
	
	<semantic_actions>
		<get_field name="patent_name" /> 
		<get_field name="inventor" />		  				
		<get_field name="pic_links" />	 
		<for_each collection="pic_links" as="pic" >
			<get_field name="link" object="pic" />
			<parse_now>
				<arg value="link" name="container_link"/>		
			</parse_now>	
	  	</for_each>	  	
	  	<get_field name="abstract_field" > 
  			<check condition="NOT_NULL" name="abstractFound" /> 
 		 </get_field>
  		 <if>
			<flag_check value="abstractFound" /> 
  			<create_and_visualize_text_surrogate>
				<arg value="abstract_field" name="text"/>
  			</create_and_visualize_text_surrogate>
  		</if>
  		<get_field name="claims">
  			<check condition="NOT_NULL" name="claimsFound" /> 
 		</get_field>
  		<if>
			<flag_check value="claimsFound" /> 
  			<create_and_visualize_text_surrogate>
				<arg value="claims" name="text"/>
  			</create_and_visualize_text_surrogate>
  		</if>
		  		  	
	  	<get_field name="citations" /> 
		<for_each collection="citations" as="cit">
			<get_field name="heading" object="cit" /> 
			<get_field name="link" object="cit" />
			<parse_later>
				<arg value="link" name="container_link"/>
				<arg value="heading" name="anchor_text"/>
			</parse_later>		  
		</for_each>
		<get_field name="referenced_bys" /> 
		<for_each collection="referenced_bys" as="ref">
			<get_field name="heading" object="ref" /> 
			<get_field name="link" object="ref" />
			<parse_later>
				<arg value="link" name="container_link"/>
				<arg value="heading" name="anchor_text"/>
			</parse_later>		  
		</for_each>
	</semantic_actions>
  </meta_metadata>
  
  <meta_metadata name="google_patent_image" extends="document" parser="xpath" domain="google.com" url_regex="(?=http://www.google.com/patents\?id=)^((?!img).)*$" user_agent_name="firefox_2" comment="Google Patents Image Class">
	<meta_metadata_field name="title" xpath="//div[@id='titlebar']/h1" />
  	<meta_metadata_field name="inventor" scalar_type="String" xpath="//div[@id='titlebar']/span"  /> 
  	<meta_metadata_field name="pic_urls" collection="ArrayList" collection_child_type="search_result" generate_class="false" hide="true" xpath="//img[@class='html-div']" >
  		<meta_metadata_field name="link" xpath="./@src"  /> 
  	</meta_metadata_field>  	
  	<semantic_actions>
	   <get_field name="pic_urls" />
	   <for_each collection="pic_urls" as="p">
	   	<get_field name="link" object="p"/>
		   <create_and_visualize_img_surrogate>
	   			<arg value="link" name="image_purl"/>
		   </create_and_visualize_img_surrogate>
		</for_each>
	 </semantic_actions>
  </meta_metadata>
  
    <meta_metadata name="google_sorry" extends="document" parser="xpath" domain="google.com" url_regex="http://sorry.google.com" >
    	<semantic_actions>
    		<back_off_from_site>
    			<arg name="domain" value="google.com"/>
    		</back_off_from_site>
    	</semantic_actions>
    </meta_metadata>
    

<!--++++ Restaurant ++++++++++++++++-->
  <meta_metadata name="restaurant" extends="document" comment="The restaurant class" >
	<meta_metadata_field name="phone" scalar_type="String" comment="Phone number of the restaurant" />
	<meta_metadata_field name="pic" scalar_type="ParsedURL" hide="true" comment="A picture from the restaurant" />
	<meta_metadata_field name="link" scalar_type="ParsedURL" comment="Link to the restaurant's website" />
	<meta_metadata_field name="rating" scalar_type="String" comment="Rating of the restaurant" />
	<meta_metadata_field name="location" hide="true" />
	<meta_metadata_field name="price_range" scalar_type="String" comment="Price range of the restaurant" />
	<meta_metadata_field name="map" scalar_type="ParsedURL"  hide="true" comment="Map image of the restaurant's location or link to a directions page" />
	<meta_metadata_field name="genres" collection="ArrayList" collection_child_type="search_result" generate_class="false" comment="The genres of food offered" >
	</meta_metadata_field> 
  </meta_metadata>
    
<!--++++ Urban Spoon ++++++++++++++++-->
  <meta_metadata name="urban_spoon_restaurant" type="restaurant" parser="xpath" url_path_tree="http://www.urbanspoon.com/r/" comment="UrbanSpoon restaurant description page" >
	<meta_metadata_field name="title" xpath="//div[@id='rest-main-block']/h1" />
	<meta_metadata_field name="phone" xpath="//div[@id='rest-main-block']/div/span" />
	<meta_metadata_field name="pic" xpath="//div[2]/a[1]/img/@src" />
	<meta_metadata_field name="link" xpath="//a[@class='url']/@href" />
	<meta_metadata_field name="rating" xpath="//div[@id='vote-score-text']/span" />
	<meta_metadata_field name="price_range" xpath="//span[@class='pricerange']/text()" />
	<meta_metadata_field name="map" xpath="//div[@id='rest-map-holder']/a/img/@src" />
	<meta_metadata_field name="genres" xpath="//div[@id='menu-block']/table/tbody/tr/td[1]/p[2]//b/a" >
	   		<meta_metadata_field name="heading" xpath="./text()"/>
	   		<meta_metadata_field name="link" xpath="./@href"/>
	</meta_metadata_field> 
	<semantic_actions>
		<get_field name="pic" />
	    <create_and_visualize_img_surrogate>
	   			<arg value="pic" name="image_purl"/>
		</create_and_visualize_img_surrogate>
	</semantic_actions>
  </meta_metadata>

<!--  +++++++++++++++++++++++++++++ weather report, used as an example of metaMetadata library +++++++++++++++++++++++++++++++++++++++ -->    
	<meta_metadata name="weather_report" extends="document" parser="xpath" domain="wunderground.com"
                   url_regex="http://www.wunderground.com/US/.*"
                   comment="weather report from wunderground.com">
        <meta_metadata_field name="city" scalar_type="String" xpath="//table[@id='cityTable']//h1" />
        <meta_metadata_field name="weather" scalar_type="String" xpath="//div[@id='curcondbox']//div[@class='b']" />
        <meta_metadata_field name="pic_url" scalar_type="ParsedURL" xpath="//div[@id='curcondbox']//img[@class='condIcon']/@src" />
        <meta_metadata_field name="temperature" scalar_type="String" xpath="//div[@id='curcondbox']//span[@pwsvariable='tempf']/@value" />
        <meta_metadata_field name="humidity" scalar_type="String" xpath="//div[@id='curcondbox']//span[@pwsvariable='humidity']" />
        <meta_metadata_field name="wind" scalar_type="String" xpath="//div[@id='curcondbox']//span[@pwsvariable='windspeedmph']" />
    </meta_metadata>

	
<!--+++++++++++++++++++++++++++++++++ Retrieval Refinements (without extraction) +++++++++++++++++++++++++++++++++-->
	
	<meta_metadata name="nytimes" type="document" extends="document" url_stripped="http://nytimes.com" user_agent_name="google_bot_0" />
	<meta_metadata name="www.nytimes" type="document" extends="document" url_path_tree="http://www.nytimes.com/" user_agent_name="google_bot_0" />

	<!-- <meta_metadata name="test_semantic_action" generate_class="false">
		<semantic_actions>
			<semantic_action id="" name="level_0_action1" object="" return_value="">
				<checks>
				</checks>
				<flag_checks>
				</flag_checks>
				<arguments>
				</arguments>
				<semantic_action name="level_1_action1" object="" return_value="ret_val_level1">
					<checks>
					</checks>
					<flag_checks>
					</flag_checks>
					<arguments>
					</arguments>
				</semantic_action>
			</semantic_action>
			<semantic_acton name="level_0_action2" object="  " return_value="">
			</semantic_acton>
		
		</semantic_actions>
	
	</meta_metadata>-->
</meta_metadata_repository>
